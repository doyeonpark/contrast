---
title:  "c# 기본서 - c# 7.1: Tuple, ValueTuple, async, is"
date:   2018-12-07 12:06:00
tags: [c#, c#7.1, default, ValueTuple, async, is]
categories: study-log
---

### defalut 리터럴 형식 추가
- 2.0에 추가된 default는 (T)를 인자로 받았다.
  - 문자 그대로 T를 인자로 받으면 컴파일시 기본값을 추측하는데,
- 7.0부터 어차피 타입추론이 이뤄지므로 지정이 필요없다고 판단하고 리터럴로 사용하게 됐다.


### Main메서드에 async 예약어 허용
- 어차피 우회가 가능했기 때문에 부자연스러운 코드가 발생한다고 판단하고 허용되었다.


### 튜플 변수명 자동지정
- item1, item2 등의 형식의 변수명을 사용하지 않으려면 명시적으로 이름을 지정해줘야했지만
- 7.1부터는 변수명을 타입 추론(타입을 확인해서 할당될 때 적용된 이름사용) 을 통해 알수있게됐다
  - 물론 추론이 불가능할 땐 item형식의 이름을 쓴다.
    {% highlight c# %}
    {
        int age = 20;
        string name = "Kevin Arnold";
        var t = (age, name);
        Console.WriteLine($"{t.age}, {t.Name}")

        var person = new { Age = 30, Name = "Winnie Copper"};
        var t = (25, person.Name);
        Console.WriteLine($"{t.Item1}, {t.Name}");
    }
    {% endhighlight %}
- 이와 같은 변화는 LINQ에서 훨씬 간결한 표현을 할 수 있도록 한다.
    {% highlight c# %}
    {  
        //익명 타입활용
        var dateList = from person in people
                        select { Name = person.Name, Year = DateTime.Now.AddYears(-person.Age).Year
        
        //이전 버전에서 튜플 이름을 반드시 지정해주고싶을때
        var dateList = from person in people
                        select (Name: person.Name, Year: DateTime.Now.AddYears(-person.Age).Year);

        //7.1에서 튜플 자동지정 활용
        var dateList = from person in people
                        select (person.Name, DateTime.Now.AddYears(-person.Age).Year);

    }
    {% endhighlight %}

### is의 제너릭 패턴매칭 허용
- T타입으로 명시된 변수의 경우 is문 혹은 case문을 통해 패턴매칭이 불가능했으나, 7.1부터 가능해졌다.