---
title:  "c# 기본서 - c# 3.0: LINQ"
date:   2018-12-06 11:44:00
tags: [c#, c#3.0, LINQ]
categories: study-log
---

### LINQ
- IEnumerable<T>를 인자로 받는다
    - IEnumerable<T>, IOrderedEnumerable<TElement>를 상속받아 정의하면 LINQ를 사용할 수 있다
- IEnumerate<T>, IOrderedEnumerable<TElement>를 반환한다.
    - 두 요소를 반환하지 않는 형식의 메서드를 사용하면 메서드가 즉시 실행된다.
- select 예약어: Select 확장 메서드호출하는 또 다른 문법에 불과하다.
    {% highlight c# %}
    var all = from person in people
        select person;
    people.Select((elem) => elem );
    {% endhighlight %}
- orderby: IComparable 인터페이스가 구현된 타입에 사용할 수 있다.

    {% highlight c# %}
    var all = from person in people
        orderby person.Age descending //디폴트가 ascending
        select person;
    {% endhighlight %}

- group ... by: select ... by와 의미적으로 같으므로 (실제 select ... by는 없음) select가 올 수 없다.
    - 그렇기 때문에 select에서 가능한 형변환 작업이 가능하다.
    {% highlight c# %}
    var addrGroup = from person in people
        group person by person.Address;

    //아래와 같이도 가능하다
    var changedGroup = from person in people
        group new { Name = person.Name, Age = person.Age } by person.Address;

    foreach(var itemGroup in addrGroup) //컬렉션 요소 분류
    {
        Console.WriteLine(itemGroup.Key) 
        
        foreach(var item in itemGroup) //컬렉션 반환
            Console.WriteLine(item.Name);
    }
    {% endhighlight %}
- join: 이런게 가능하다 정도만?
    {% highlight c# %}
    //만족하는 레코드만 삽입시키는 inner join의 유형
    //on ... equals ...가 사용됐다.
    var nameToLangList = from person in people
        join language in languages on person.Name equals language.Name
    
    //누락시키지 않고 전부 삽입하는 outer join의 유형
    //빈값에 대한 후처리
    var nameToLangAllList = from person in people
        join language in languages on person.Name equals language.Name into lang
        from language in lang.DefaultIfEmpty(new MainLanguage())
        select new { Name=person.Name, Age=person.Age, Language=language.Language }
    {% endhighlight %}