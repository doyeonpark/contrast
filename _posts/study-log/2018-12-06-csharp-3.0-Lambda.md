---
title:  "c# 기본서 - c# 3.0: Lambda, 확장메서드"
date:   2018-12-06 10:03:00
tags: [c#, c#3.0, Lambda, extensionMethod]
categories: study-log
---

### Lambda Expression
- 람다 대수는 수학에서 함수를 표기하는 방식에서 착안했다. 프로그래밍에서는 두가지 의미를 갖는다.
    1. 코드로서 람다: 익명메서드의 간편표기법
        - 가령 수학에서 f(x, y) = x + y인 식을 람다로 치면 (x, y) => x + y 로 표현하는 것과 같다.
        - 위를 부연하면, 기본적으로 값이 반환된다는 가정하에 return문을 생략할 수 있으며, 이경우 람다식의 연산자인 '=>' 기호 다음에 오는 중괄호도 생략 가능하다.
    2. 데이터로서 람다: 식자체가 데이터가 되어 구문분석의 대상이 되는 것들. 별도로 컴파일 가능하며 메서드로도 실행 가능하다.


### 익명메서드의 간편표기법으로서의 람다: Action<T>, Func<TResult>
- 익명메서드에서는 delegate 정의를 별도로 해줘야하는 문제가 있었다. (이전 글 익명메서드 예제 참조) 이를 위해 별개로 정의된 함수표현이 있는데, 아래와 같다.
    - public delegate void Action<T>(T obj) : 반환값이 없는 델리게이트, T형식 매개변수는 입력될 매개 인자 1개의 타입지정
    - public delegate void Func<TResult>() : 반환값이 있는 델리게이트, TResult는 반환될 타입지정
- 2가지 함수 다 인자가 16개까지 확장 가능하며
- Func<TResult>()가 인자가 있는 경우에는 마지막 타입지정에 TResult만 있으면 된다.


### Action<T>, Func<TResult> 활용과 확장 매서드
- List<T>에 정의된 ForEach는 다음과 Action<T>를 인자로 받는다. 이를 다음과 같이 표현 가능하다.
    {% highlight c# %}
    list.ForEach((elem) => { Console.WriteLine(elem + " * 2 == "+ (elem*2)); }); //list의 요소 수만큼 델리게이트가 실행된다.
    {% endhighlight %}
- List<T>의 FindAll()은 Predicate<T>로 표기되는 Func<T, bool>을 인자로 받는다.
- FindAll과 유사한 기능을 가진 Where()의 경우 iEnumerable<TSource>의 확장 메서드로, 열거자를 통해 직접 요소를 순회할때서야 람다식이 하나씩 실행된다.
    {% highlight c# %}
    //확장 메서드: 기존 클래스의 내부구조를 바꾸지 않고 새로운 인스턴스 메서드를 정의하는 것처럼 추가하는 것. static클래스에 static 메서드로 확장하려는 타입의 매개변수를 this 예약와함께 명시하는 식.
    public static IEnumerable<TSource> Where<TSource>(this IEnumerable<TSource> source, Func<TSoucem bool> predicate)
    {% endhighlight %}
    - 이를 지연된 평가(lazy evaluation)이라고 하며,
    - CPU가 실제로 데이터가 필요한 순간에서야 실행된다는 특징이 있다.



### 데이터로서의 람다
- 데이터 구조로 표현된 것을 식트리(expression tree)라고 한다
- 이는 델리게이트 타입으로 전달되는 것이 아니라 구문분석을 할 수 있는 System.Linq.Expressions.Expression 타입 인스턴스가 된다.
- 데이터 람다 메서드는 실행시점에 만들 수 있다.

